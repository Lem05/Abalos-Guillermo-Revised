<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shopping Cart</title>

</head>
<body>
    <h1>Shopping Cart</h1>
    <div>
        <ul>
            <li>
                <a href="#" class="add-to-cart" data-name="Manga" data-price="₱20.00"></a>
            </li>
            <li>
                <a href="#" class="add-to-cart" data-name="Pinya" data-price="₱50.00"></a>
            </li>
            <li>
                <a href="#" class="add-to-cart" data-name="Ubas" data-price="₱100.00"></a>
            </li>
            <li>
                <a href="#" class="add-to-cart" data-name="Saging" data-price="₱35.00"></a>
            </li>
            <li>
                <a href="#" class="add-to-cart" data-name="Mansanas" data-price="₱25.00"></a>
            </li>
        </ul>
        <button id="clear-cart">Remove</button>
    </div>
    <div>
        <ul id="show-cart">
            <li>????</li>
        </ul>
        <div>
            you have <span id="count-cart">x</span> items in your cart
        </div>
        <div>
            Total: ₱<span id="total-cart"></span>
        </div>
    </div>

    <script src="cart.js"></script>
    <script src="jquery.js"></script>
    <script>

        $(".add-to-cart").click(function(event) {
            event.preventDefault();
            var name = $(this).attr("data-name")
            var price = Number($(this).attr("data-price"));

            shoppingCart.addItemToCart (name, price, 1);
            displayCart();
        });
        $("#clear-cart").click(function(event){
            shoppingCart.clearCart();
            displayCart();
        });

        function displayCart() {
            var cartArray = shoppingCart.listCart();
            console.log(cartArray);
            var output = "";

            for (var i in cartArray) {
                output += "<li>"
                    +cartArray[i].name
                    +"<input class='item-count' type='number' data-name'"
                    +cartArray[i].name
                    +"'value'" +cartArray[i].count+"'>"
                    +" x " + cartArray[i].price
                    +" = " + cartArray[i].total
                    +"<button class='plus-item data-name'"
                    +cartArray[i].name+"'>+</button>"
                    +"<button class='subtract-item data-name'"
                    +cartArray[i].name+"'>-</button>"
                    +"<button class='delete-item data-name'"
                    +cartArray[i].name+"'>DELETE</button>"
                    +"</li>";
            }

            $("#show-cart").on("click", ".delete-item", function(event){
                var name = $(this).attr("data-name")
                shoppingCart.removeItemFromCartAll(name);
                displayCart();
            });

            $("#show-cart").on("click", ".subtract-item", function(event){
                var name = $(this).attr("data-name")
                shoppingCart.removeItemFromCart(name);
                displayCart();
            });

            $("#show-cart").on("click", ".plus-item", function(event){
                var name = $(this).attr("data-name")
                shoppingCart.addItemToCart(name, 0, 1);
                displayCart();
            });

            $("#show-cart").on("click", ".item-count", function(event){
                var name = $(this).attr("data-name");
                var count = Number($(this).val());
                shoppingCart.setCountForItem(name, count);
                displayCart();
            });

            displayCart();
        }

    </script>
</body>
</html>